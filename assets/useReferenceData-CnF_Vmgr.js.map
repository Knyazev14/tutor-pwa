{"version":3,"file":"useReferenceData-CnF_Vmgr.js","sources":["../../src/hooks/useReferenceData.js"],"sourcesContent":["// src/hooks/useReferenceData.js\r\nimport { useState, useEffect } from 'react';\r\nimport { StudentApi } from '../api/student.api';\r\nimport { CategoryApi } from '../api/category.api';\r\nimport { StatusApi } from '../api/status.api';\r\n\r\nexport const useReferenceData = () => {\r\n  const [students, setStudents] = useState([]);\r\n  const [categories, setCategories] = useState([]);\r\n  const [statuses, setStatuses] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n\r\n    const fetchAll = async () => {\r\n      try {\r\n        setLoading(true);\r\n        \r\n        const [studentsRes, categoriesRes, statusesRes] = await Promise.all([\r\n          StudentApi.getAll(),\r\n          CategoryApi.getAll(),\r\n          StatusApi.getAll()\r\n        ]);\r\n\r\n        if (isMounted) {\r\n          setStudents(studentsRes.data || []);\r\n          setCategories(categoriesRes.data || []);\r\n          setStatuses(statusesRes.data || []);\r\n        }\r\n      } catch (err) {\r\n        console.error('Error loading reference data:', err);\r\n        if (isMounted) {\r\n          setError(err.response?.data?.message || 'Ошибка загрузки справочников');\r\n        }\r\n      } finally {\r\n        if (isMounted) {\r\n          setLoading(false);\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchAll();\r\n\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, []);\r\n\r\n  return {\r\n    students,\r\n    categories,\r\n    statuses,\r\n    loading,\r\n    error\r\n  };\r\n};"],"names":["useReferenceData","students","setStudents","useState","categories","setCategories","statuses","setStatuses","loading","setLoading","error","setError","useEffect","isMounted","studentsRes","categoriesRes","statusesRes","StudentApi","CategoryApi","StatusApi","err"],"mappings":"kLAMY,MAACA,EAAmB,IAAM,CACpC,KAAM,CAACC,EAAUC,CAAW,EAAIC,EAAAA,SAAS,CAAA,CAAE,EACrC,CAACC,EAAYC,CAAa,EAAIF,EAAAA,SAAS,CAAA,CAAE,EACzC,CAACG,EAAUC,CAAW,EAAIJ,EAAAA,SAAS,CAAA,CAAE,EACrC,CAACK,EAASC,CAAU,EAAIN,EAAAA,SAAS,EAAI,EACrC,CAACO,EAAOC,CAAQ,EAAIR,EAAAA,SAAS,IAAI,EAEvCS,OAAAA,EAAAA,UAAU,IAAM,CACd,IAAIC,EAAY,GA6BhB,OA3BiB,SAAY,CAC3B,GAAI,CACFJ,EAAW,EAAI,EAEf,KAAM,CAACK,EAAaC,EAAeC,CAAW,EAAI,MAAM,QAAQ,IAAI,CAClEC,EAAW,OAAM,EACjBC,EAAY,OAAM,EAClBC,EAAU,OAAM,CAC1B,CAAS,EAEGN,IACFX,EAAYY,EAAY,MAAQ,CAAA,CAAE,EAClCT,EAAcU,EAAc,MAAQ,CAAA,CAAE,EACtCR,EAAYS,EAAY,MAAQ,CAAA,CAAE,EAEtC,OAASI,EAAK,CACZ,QAAQ,MAAM,gCAAiCA,CAAG,EAC9CP,GACFF,EAASS,EAAI,UAAU,MAAM,SAAW,8BAA8B,CAE1E,QAAC,CACKP,GACFJ,EAAW,EAAK,CAEpB,CACF,KAIO,IAAM,CACXI,EAAY,EACd,CACF,EAAG,CAAA,CAAE,EAEE,CACL,SAAAZ,EACA,WAAAG,EACA,SAAAE,EACA,QAAAE,EACA,MAAAE,CACJ,CACA"}