import{r as c,j as e,u as R,a as q,R as C,L as M,B as k}from"./index-CxWwzzE3.js";import{S as y}from"./status.api-BLfehEg-.js";const F=()=>{const[a,d]=c.useState([]),[i,l]=c.useState(!1),[u,r]=c.useState(null),o=c.useCallback(async()=>{l(!0),r(null);try{const n=await y.getAll();return d(n.data),n.data}catch(n){const s=n.response?.data?.message||"ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ ÑÑ‚Ð°Ñ‚ÑƒÑÐ¾Ð²";throw r(s),n}finally{l(!1)}},[]),m=c.useCallback(async n=>{l(!0),r(null);try{return(await y.getById(n)).data}catch(s){const t=s.response?.data?.message||"ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ ÑÑ‚Ð°Ñ‚ÑƒÑÐ°";throw r(t),s}finally{l(!1)}},[]),g=c.useCallback(async n=>{l(!0),r(null);try{const s=await y.create(n);return await o(),s.data}catch(s){const t=s.response?.data?.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ ÑÑ‚Ð°Ñ‚ÑƒÑÐ°";throw r(t),s}finally{l(!1)}},[o]),f=c.useCallback(async(n,s)=>{l(!0),r(null);try{const t=await y.update(n,s);return await o(),t.data}catch(t){const h=t.response?.data?.message||"ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ ÑÑ‚Ð°Ñ‚ÑƒÑÐ°";throw r(h),t}finally{l(!1)}},[o]),b=c.useCallback(async n=>{l(!0),r(null);try{await y.delete(n),await o()}catch(s){const t=s.response?.data?.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ ÑÑ‚Ð°Ñ‚ÑƒÑÐ°";throw r(t),s}finally{l(!1)}},[o]);return{statuses:a,loading:i,error:u,fetchStatuses:o,getStatus:m,createStatus:g,updateStatus:f,deleteStatus:b}},$=a=>{const[d,i]=c.useState(""),[l,u]=c.useState("name"),[r,o]=c.useState("asc"),m=c.useMemo(()=>{if(!a.length)return[];let s=[...a];if(d){const t=d.toLowerCase();s=s.filter(h=>h.name?.toLowerCase().includes(t)||h.slug?.toLowerCase().includes(t))}return s.sort((t,h)=>{let p=0;switch(l){case"name":p=(t.name||"").localeCompare(h.name||"");break;case"slug":p=(t.slug||"").localeCompare(h.slug||"");break;case"lessons":p=(t.lessonsCount||0)-(h.lessonsCount||0);break;default:p=0}return r==="asc"?p:-p}),s},[a,d,l,r]),g=c.useMemo(()=>({total:a.length,totalLessons:a.reduce((s,t)=>s+(t.lessonsCount||0),0),averageLessons:a.length?Math.round(a.reduce((s,t)=>s+(t.lessonsCount||0),0)/a.length):0,maxLessons:Math.max(...a.map(s=>s.lessonsCount||0),0)}),[a]);return{searchQuery:d,setSearchQuery:i,sortBy:l,setSortBy:u,sortOrder:r,toggleSortOrder:()=>{o(s=>s==="asc"?"desc":"asc")},filteredStatuses:m,stats:g,getStatusColor:s=>{const t={pending:"bg-yellow-100 text-yellow-800 border-yellow-300",paid:"bg-green-100 text-green-800 border-green-300",cancelled:"bg-red-100 text-red-800 border-red-300",completed:"bg-blue-100 text-blue-800 border-blue-300",default:"bg-gray-100 text-gray-800 border-gray-300"};return t[s]||t.default},getStatusIcon:s=>{const t={pending:"â³",paid:"âœ…",cancelled:"âŒ",completed:"âœ”ï¸",default:"ðŸ“Š"};return t[s]||t.default}}};function P({status:a,onEdit:d,onDelete:i,getStatusColor:l,getStatusIcon:u}){const[r,o]=c.useState(!1),m=l?.(a.slug)||"bg-gray-100 text-gray-800 border-gray-300",g=u?.(a.slug)||"ðŸ“Š";return e.jsxs("div",{className:`relative border-2 rounded-xl p-5 transition-all duration-300 ${m}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs font-mono bg-white/50 px-2 py-1 rounded-full",children:["#",a.id]}),e.jsxs("span",{className:"text-xs px-3 py-1 rounded-full font-medium bg-white/50",children:[g," ",a.slug||"ÑÑ‚Ð°Ñ‚ÑƒÑ"]})]}),e.jsx("button",{onClick:()=>o(!r),className:"text-gray-600 hover:text-gray-800 transition-colors",children:r?"â–¼":"â–¶"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-white/50 flex items-center justify-center text-3xl",children:g}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:a.name||"Ð‘ÐµÐ· Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ñ"}),e.jsxs("div",{className:"text-sm opacity-75",children:["slug: ",a.slug||"â€”"]})]})]}),e.jsx("div",{className:"bg-white/30 p-3 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-lg",children:a.lessonsCount||0}),e.jsx("div",{className:"text-xs opacity-75",children:"Ð£Ñ€Ð¾ÐºÐ¾Ð²"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-lg",children:a.booksCount||0}),e.jsx("div",{className:"text-xs opacity-75",children:"Ð‘Ñ€Ð¾Ð½ÐµÐ¹"})]})]})}),r&&e.jsxs("div",{className:"mt-4 pt-3 border-t border-white/30 flex gap-2",children:[d&&e.jsx("button",{onClick:()=>d(a),className:"flex-1 py-2 px-3 bg-white/50 hover:bg-white/70 rounded-lg transition-colors text-sm font-medium",children:"âœï¸ Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ"}),i&&e.jsx("button",{onClick:()=>i(a.id),className:"flex-1 py-2 px-3 bg-red-500/20 hover:bg-red-500/30 text-red-700 rounded-lg transition-colors text-sm font-medium",children:"ðŸ—‘ï¸ Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ"})]})]})]})}function G({isOpen:a,onClose:d,onSubmit:i,status:l}){const[u,r]=c.useState({name:"",slug:""});if(c.useEffect(()=>{r(l?{name:l.name||"",slug:l.slug||""}:{name:"",slug:""})},[l]),!a)return null;const o=g=>{g.preventDefault();const f=u.slug||u.name.toLowerCase().replace(/[^Ð°-Ña-z0-9]+/g,"-").replace(/^-|-$/g,"");i({...u,slug:f})},m=g=>{const{name:f,value:b}=g.target;r(n=>({...n,[f]:b}))};return e.jsx("div",{className:"fixed inset-0 bg-sky-100/70 flex items-start md:items-center justify-center z-50 p-4 overflow-y-auto overflow-x-hidden",children:e.jsx("div",{className:"bg-white rounded-xl max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:l?"âœï¸ Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚ÑƒÑ":"âž• ÐÐ¾Ð²Ñ‹Ð¹ ÑÑ‚Ð°Ñ‚ÑƒÑ"}),e.jsx("button",{onClick:d,className:"text-gray-500 hover:text-gray-700",children:"âœ•"})]}),e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ðŸ“Š ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ ÑÑ‚Ð°Ñ‚ÑƒÑÐ° *"}),e.jsx("input",{type:"text",name:"name",value:u.name,onChange:m,required:!0,placeholder:"ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: ÐžÐ¿Ð»Ð°Ñ‡ÐµÐ½Ð¾",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ðŸ”— Slug (Ð¸Ð´ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ñ€)"}),e.jsx("input",{type:"text",name:"slug",value:u.slug,onChange:m,placeholder:"paid",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"ÐžÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ Ð¿ÑƒÑÑ‚Ñ‹Ð¼ Ð´Ð»Ñ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð¸Ð· Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ñ"})]}),!l&&e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"ÐŸÑ€ÐµÐ´ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ‹Ðµ ÑÑ‚Ð°Ñ‚ÑƒÑÑ‹:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsx("div",{className:"bg-yellow-100 p-2 rounded",children:"â³ ÐžÐ¶Ð¸Ð´Ð°Ð½Ð¸Ðµ (pending)"}),e.jsx("div",{className:"bg-green-100 p-2 rounded",children:"âœ… ÐžÐ¿Ð»Ð°Ñ‡ÐµÐ½Ð¾ (paid)"}),e.jsx("div",{className:"bg-red-100 p-2 rounded",children:"âŒ ÐžÑ‚Ð¼ÐµÐ½ÐµÐ½Ð¾ (cancelled)"}),e.jsx("div",{className:"bg-blue-100 p-2 rounded",children:"âœ”ï¸ ÐŸÑ€Ð¾Ð²ÐµÐ´ÐµÐ½Ð¾ (completed)"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:l?"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ":"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ"}),e.jsx("button",{type:"button",onClick:d,className:"flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-200 transition-colors",children:"ÐžÑ‚Ð¼ÐµÐ½Ð°"})]})]})]})})})}function K(){const a=R(),{isAuthenticated:d}=q(),{statuses:i,loading:l,error:u,fetchStatuses:r,createStatus:o,updateStatus:m,deleteStatus:g}=F(),{searchQuery:f,setSearchQuery:b,sortBy:n,setSortBy:s,sortOrder:t,toggleSortOrder:h,filteredStatuses:p,stats:w,getStatusColor:O,getStatusIcon:B}=$(i),[I,v]=C.useState(!1),[S,N]=C.useState(null),[z,L]=C.useState(!1);c.useEffect(()=>{if(!d){a("/login");return}r()},[d,a,r]);const E=()=>{N(null),v(!0)},A=x=>{N(x),v(!0)},D=async x=>{if(window.confirm("Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹, Ñ‡Ñ‚Ð¾ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ ÑÑ‚Ð¾Ñ‚ ÑÑ‚Ð°Ñ‚ÑƒÑ?"))try{await g(x),alert("âœ… Ð¡Ñ‚Ð°Ñ‚ÑƒÑ ÑƒÐ´Ð°Ð»ÐµÐ½")}catch(j){alert("âŒ ÐžÑˆÐ¸Ð±ÐºÐ°: "+j.message)}},Q=async x=>{L(!0);try{const j={name:x.name,slug:x.slug};S?(await m(S.id,j),alert("âœ… Ð¡Ñ‚Ð°Ñ‚ÑƒÑ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½")):(await o(j),alert("âœ… Ð¡Ñ‚Ð°Ñ‚ÑƒÑ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑÐ¾Ð·Ð´Ð°Ð½")),v(!1),N(null)}catch(j){alert("âŒ ÐžÑˆÐ¸Ð±ÐºÐ°: "+j.message)}finally{L(!1)}};return l&&!i.length?e.jsx(M,{fullScreen:!0}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:["ðŸ“Š Ð¡Ñ‚Ð°Ñ‚ÑƒÑÑ‹ ÑƒÑ€Ð¾ÐºÐ¾Ð²",e.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",p.length," Ð¸Ð· ",i.length,")"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{onClick:E,variant:"success",icon:e.jsx("span",{children:"âž•"}),size:"sm",children:"ÐÐ¾Ð²Ñ‹Ð¹ ÑÑ‚Ð°Ñ‚ÑƒÑ"}),e.jsx(k,{onClick:r,disabled:l,variant:"primary",icon:e.jsx("span",{children:"ðŸ”„"}),size:"sm",children:"ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-blue-600",children:"Ð’ÑÐµÐ³Ð¾ ÑÑ‚Ð°Ñ‚ÑƒÑÐ¾Ð²"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:w.total})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-green-600",children:"Ð’ÑÐµÐ³Ð¾ ÑƒÑ€Ð¾ÐºÐ¾Ð²"}),e.jsx("div",{className:"text-2xl font-bold text-green-700",children:w.totalLessons})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-purple-600",children:"Ð’ ÑÑ€ÐµÐ´Ð½ÐµÐ¼ Ð½Ð° ÑÑ‚Ð°Ñ‚ÑƒÑ"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700",children:w.averageLessons})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"ðŸ” ÐŸÐ¾Ð¸ÑÐº Ð¿Ð¾ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸ÑŽ Ð¸Ð»Ð¸ slug...",value:f,onChange:x=>b(x.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:n,onChange:x=>s(x.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[e.jsx("option",{value:"name",children:"ÐŸÐ¾ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸ÑŽ"}),e.jsx("option",{value:"slug",children:"ÐŸÐ¾ slug"}),e.jsx("option",{value:"lessons",children:"ÐŸÐ¾ ÑƒÑ€Ð¾ÐºÐ°Ð¼"})]}),e.jsx("button",{onClick:h,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",title:t==="asc"?"ÐŸÐ¾ Ð²Ð¾Ð·Ñ€Ð°ÑÑ‚Ð°Ð½Ð¸ÑŽ":"ÐŸÐ¾ ÑƒÐ±Ñ‹Ð²Ð°Ð½Ð¸ÑŽ",children:t==="asc"?"â†‘":"â†“"})]})]}),u&&e.jsxs("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg",children:["âŒ ",u]}),e.jsxs("div",{className:"flex flex-wrap gap-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Ð¦Ð²ÐµÑ‚Ð¾Ð²Ð°Ñ Ð»ÐµÐ³ÐµÐ½Ð´Ð°:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-100 border border-yellow-300 rounded"}),e.jsx("span",{className:"text-xs",children:"ÐžÐ¶Ð¸Ð´Ð°Ð½Ð¸Ðµ"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-100 border border-green-300 rounded"}),e.jsx("span",{className:"text-xs",children:"ÐžÐ¿Ð»Ð°Ñ‡ÐµÐ½Ð¾"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-red-100 border border-red-300 rounded"}),e.jsx("span",{className:"text-xs",children:"ÐžÑ‚Ð¼ÐµÐ½ÐµÐ½Ð¾"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-blue-100 border border-blue-300 rounded"}),e.jsx("span",{className:"text-xs",children:"ÐŸÑ€Ð¾Ð²ÐµÐ´ÐµÐ½Ð¾"})]})]}),p.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(x=>e.jsx(P,{status:x,onEdit:A,onDelete:D,getStatusColor:O,getStatusIcon:B},x.id))}):!l&&e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-gray-500 text-lg",children:i.length===0?"ðŸ“­ ÐÐµÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¾ ÑÑ‚Ð°Ñ‚ÑƒÑÐ°Ñ…":"ðŸ” ÐÐµÑ‚ ÑÑ‚Ð°Ñ‚ÑƒÑÐ¾Ð² Ð¿Ð¾ Ð²Ð°ÑˆÐµÐ¼Ñƒ Ð·Ð°Ð¿Ñ€Ð¾ÑÑƒ"}),i.length===0&&e.jsx(k,{onClick:E,variant:"success",className:"mt-4",children:"âž• Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð¿ÐµÑ€Ð²Ñ‹Ð¹ ÑÑ‚Ð°Ñ‚ÑƒÑ"})]}),e.jsx(G,{isOpen:I,onClose:()=>{v(!1),N(null)},onSubmit:Q,status:S}),z&&e.jsx("div",{className:"fixed inset-0 bg-sky-100/70 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white p-4 rounded-lg",children:e.jsx(M,{})})})]})}export{K as default};
//# sourceMappingURL=StatusPage-705u5lUj.js.map
